"use strict";!function(){var e=0;function n(){var t=":"+e;return e++,t}function t(t,e){this.el=t,this.listbox=new i(e,this),e.id=n(),this.el.addEventListener("focus",this.handleFocus.bind(this),!0),this.el.addEventListener("blur",this.handleBlur.bind(this),!0),this.el.addEventListener("input",this.handleInput.bind(this)),this.el.addEventListener("keydown",this.handleKeyDown.bind(this))}function i(t,e){this.el=t,this.textbox=e,this.items=Array.prototype.slice.call(t.querySelectorAll("[role=option]"));for(var i=0;i<this.items.length;i++){var s=this.items[i];s.id=n(),s.addEventListener("mouseover",this.handleHoverOnItem.bind(this)),s.addEventListener("mousedown",this.handleClickOnItem.bind(this),!0)}this.visibleItems=this.items.slice()}t.prototype={set value(t){this.el.value=t},showListbox:function(){this.listbox.show(),this.el.setAttribute("aria-expanded",!0)},hideListbox:function(){this.listbox.hide(),this.el.setAttribute("aria-expanded",!1),this.el.removeAttribute("aria-activedescendant")},handleFocus:function(t){this.showListbox()},handleBlur:function(t){this.hideListbox()},handleInput:function(t){this.showListbox(),this.listbox.filter(this.el.value)},handleKeyDown:function(t){switch(t.keyCode){case 40:this.listbox.hidden||this.listbox.nextActiveListItem();break;case 38:this.listbox.hidden||this.listbox.previousActiveListItem();break;case 13:var e=this.listbox.activeItem;if(!e)break;this.setSelected(e),this.hideListbox();break;case 27:this.hideListbox()}},setSelected:function(t){this.value=t.textContent},setActiveDescendant:function(t){t.id&&this.el.setAttribute("aria-activedescendant",t.id)}},i.prototype={toggle:function(){this.hidden?this.show():this.hide()},get hidden(){return this.el.hasAttribute("hidden")},get activeItem(){return this.el.querySelector("[role=option].active")},filter:function(t){var e=0,i=!0,s=!(this.visibleItems=[]),n=void 0;try{for(var h,o=this.items[Symbol.iterator]();!(i=(h=o.next()).done);i=!0){(a=h.value).textContent.toLowerCase().startsWith(t.toLowerCase())?(e++,a.hidden=!1,this.visibleItems.push(a)):(a.hidden=!0,a.classList.remove("active"))}}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}if(0===e)this.hide();else for(var r=0;r<this.visibleItems.length;r++){var a;(a=this.visibleItems[r]).setAttribute("aria-posinset",r+1),a.setAttribute("aria-setsize",this.visibleItems.length)}},show:function(){this.hidden&&this.el.removeAttribute("hidden")},hide:function(){this.hidden||(this.activeItem&&updateRestaurants(),this.el.setAttribute("hidden",""))},handleHoverOnItem:function(t){var e=this.visibleItems.indexOf(t.target);e<0||this.changeActiveListitem(e)},handleClickOnItem:function(t){var e=t.target;this.items.indexOf(e)<0||(this.textbox.setSelected(e),this.hide())},nextActiveListItem:function(){var t=this.activeItem,e=-1;t&&(e=this.visibleItems.indexOf(t));var i=e;i=(i+1)%this.visibleItems.length,this.changeActiveListitem(i)},previousActiveListItem:function(){var t=this.activeItem,e=-1;t&&(e=this.visibleItems.indexOf(t));var i=e;--i<0&&(i+=this.visibleItems.length),this.changeActiveListitem(i)},changeActiveListitem:function(t){var e=this.activeItem,i=this.visibleItems[t];e&&e.classList.remove("active"),i.classList.add("active"),this.textbox.setActiveDescendant(i)}};var s=document.querySelector("input[id=neighborhoods-select]"),h=document.querySelector("div.listboxNeighborhood"),o=document.querySelector("input[id=cuisines-select]"),r=document.querySelector("div.listboxCuisine");new t(s,h),new t(o,r)}();